# Verification: P5-18 — Control Plane Presentation Cleanup

## Objective
Confirm presentation-only normalization across control-plane pages without behavioral changes.

## 1. Routes Sanity

**Command:**
```bash
php spark routes | findstr /I "controlplane dashboard console operations danger settings onboarding"
```

**Output:**
```
| GET    | controlplane/dashboard                | ??    | \App\Controllers\ControlPlane\Dashboard::index                | csrf controlplane                         | controlplane secureheaders csrfjson toolbar                         |
| GET    | controlplane/console                  | ??    | \App\Controllers\ControlPlane\Console::index                  | csrf controlplane                         | controlplane secureheaders csrfjson toolbar                         |
| GET    | controlplane/danger                   | ??    | \App\Controllers\ControlPlane\Danger::index                   | csrf controlplane                         | controlplane secureheaders csrfjson toolbar                         |
| GET    | controlplane/onboarding/clinic/create | ??    | \App\Controllers\ControlPlane\Onboarding::createClinic        | csrf controlplane                         | controlplane secureheaders csrfjson toolbar                         |
| GET    | /                                     | ??    | \App\Controllers\Dashboard::index                             | csrf auth tenant                          | tenant auth secureheaders csrfjson toolbar                          |
| GET    | dashboard                             | ??    | \App\Controllers\Dashboard::index                             | csrf auth tenant permission:dashboard     | permission:dashboard tenant auth secureheaders csrfjson toolbar     |
| GET    | dashboard/stats                       | ??    | \App\Controllers\Dashboard::getStats                          | csrf auth tenant permission:dashboard     | permission:dashboard tenant auth secureheaders csrfjson toolbar     |
| GET    | dashboard/chart-data                  | ??    | \App\Controllers\Dashboard::getChartData                      | csrf auth tenant permission:dashboard     | permission:dashboard tenant auth secureheaders csrfjson toolbar     |
| GET    | notifications/ledger                  | ??    | \App\Controllers\NotificationLedger::index                    | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
| GET    | settings                              | ??    | \App\Controllers\Settings::index                              | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
| GET    | settings/backup                       | ??    | \App\Controllers\Settings::backup                             | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
| GET    | settings/download-backup/([^/]+)      | ??    | \App\Controllers\Settings::downloadBackup/$1                  | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
| GET    | settings/security                     | ??    | \App\Controllers\Settings::security                           | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
| GET    | settings/notification-settings        | ??    | \App\Controllers\Settings::notifications                      | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
| GET    | settings/channels                     | ??    | \App\Controllers\Settings::channels                           | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
| GET    | rbac/sync                             | ??    | \App\Controllers\SyncController::sync                         | csrf controlplane                         | controlplane secureheaders csrfjson toolbar                         |
| GET    | rbac/status                           | ??    | \App\Controllers\SyncController::status                       | csrf controlplane                         | controlplane secureheaders csrfjson toolbar                         |
| GET    | rbac/init                             | ??    | \App\Controllers\SyncController::init                         | csrf controlplane                         | controlplane secureheaders csrfjson toolbar                         |
| GET    | rbac/setup                            | ??    | (Closure)                                                     | csrf controlplane                         | controlplane secureheaders csrfjson toolbar                         |
| POST   | controlplane/enter                    | ??    | \App\Controllers\ControlPlane::enter                          | csrf                                      | secureheaders csrfjson toolbar                                      |
| POST   | controlplane/danger/exit              | ??    | \App\Controllers\ControlPlane\Danger::exitGlobalMode          | csrf controlplane                         | controlplane secureheaders csrfjson toolbar                         |
| POST   | controlplane/onboarding/clinic/create | ??    | \App\Controllers\ControlPlane\Onboarding::processCreateClinic | csrf controlplane                         | controlplane secureheaders csrfjson toolbar                         |
| POST   | notifications/ledger/retry/([0-9]+)   | ??    | \App\Controllers\NotificationLedger::retry/$1                 | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
| POST   | settings/update                       | ??    | \App\Controllers\Settings::update                             | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
| POST   | settings/updateClinic                 | ??    | \App\Controllers\Settings::updateClinic                       | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
| POST   | settings/updateSystem                 | ??    | \App\Controllers\Settings::updateSystem                       | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
| POST   | settings/updateWorkingHours           | ??    | \App\Controllers\Settings::updateWorkingHours                 | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
| POST   | settings/create-backup                | ??    | \App\Controllers\Settings::createBackup                       | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
| POST   | settings/restore                      | ??    | \App\Controllers\Settings::restore                            | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
| POST   | settings/security/update              | ??    | \App\Controllers\Settings::updateSecurity                     | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
| POST   | settings/notifications/update         | ??    | \App\Controllers\Settings::updateNotifications                | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
| POST   | settings/updateRetention              | ??    | \App\Controllers\Settings::updateRetention                    | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
| POST   | settings/pruneExports                 | ??    | \App\Controllers\Settings::pruneExports                       | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
| POST   | settings/updateChannelStatus          | ??    | \App\Controllers\Settings::updateChannelStatus                | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
| POST   | settings/updateChannelConfig          | ??    | \App\Controllers\Settings::updateChannelConfig                | csrf auth tenant permission:settings      | permission:settings tenant auth secureheaders csrfjson toolbar      |
```

## 2. Hard Bans

**Command:**
```bash
rg -n "controlplane/exit" app/Views app/Controllers
```

**Output:**
```
app/Controllers/ControlPlane.php:51:     * POST /controlplane/exit
```

**Command:**
```bash
rg -n "<form|method=.post|csrf_field\(" app/Views/control_plane/console.php
```

**Output:**
```
```

**Command:**
```bash
rg -n "href=|<form|method=.post|csrf_field\(" app/Views/control_plane/dashboard.php
```

**Output:**
```
```

**Command:**
```bash
rg -n "controlplane/(enter|exit|danger/exit)|csrf_field\(" app/Views/layouts/control_plane.php
```

**Output:**
```
```

## 3. Guardrails

**Command:**
```bash
bash scripts/ci/saas_guardrails.sh
```

**Output:**
```
Guardrail 'DOM sinks in app/Views' passed (0 match(es)).
Guardrail 'Group-based auth helpers' passed (0 match(es)).
Guardrail 'Raw tenant queries in controllers' passed (8 match(es)).
SaaS guardrail validation succeeded.
```

## 4. Presentation Changes (Before/After Summary)

- Console: normalized section headers, tightened spacing, and standardized table headings.
- Operations: no view exists on this baseline; no changes applied.
- Settings: no view exists on this baseline; no changes applied.
- Onboarding: moved to control-plane layout and aligned form typography and spacing.
- Danger Zone: aligned heading hierarchy and warning typography with console.
- Dashboard: static copy refined, with consistent section headers and neutral styling.
