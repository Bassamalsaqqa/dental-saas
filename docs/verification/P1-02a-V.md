# Task: P1-02a-V
Date: 2026-01-07 (document creation date; runtime not executed)
Status: BLOCKED (runtime not executed)

## Scope Constraints
- Docs-only modification.
- No code or configuration changes were performed.
- This document does not claim a PASS status for runtime behavior.

## Runtime Evidence Status: BLOCKED
- App not running locally
- Not deployed
- Therefore curl outputs unavailable in this round
- Note: Cookie jar was not created due to runtime not executed.

## Pre-flight Repo State (placeholders only)

### git branch --show-current
```text
NOT CAPTURED - runtime not executed
```

### git rev-parse HEAD
```text
NOT CAPTURED - runtime not executed
```

### git status --porcelain
```text
NOT CAPTURED - runtime not executed
```

## Environment Options (Deferred)

Option A (spark serve):
- php spark serve --host 127.0.0.1 --port 8080
- BASE_URL=http://127.0.0.1:8080

Option B (XAMPP Apache):
- Start Apache (XAMPP control panel)
- BASE_URL=http://localhost/dental-improvement/public

## BASE_URL Sanity Check (Deferred)
Command (no -L):
curl -i -sS --max-time 10 "${BASE_URL}/"

```text
NOT CAPTURED - runtime not executed
```

## Evidence Capture Commands (Deferred)

Unauth 401 JSON
```bash
curl -i -sS --max-time 10 -H "Accept: application/json" "${BASE_URL}/api/v1/patients"
```

Auth but unauthorized 403 JSON (cookie jar OUTSIDE repo)
```bash
curl -i -sS --max-time 10 -H "Accept: application/json" -b /path/outside/repo/p1-02a-v.cookies.txt "${BASE_URL}/api/v1/finances"
```

Non-API 302
```bash
curl -i -sS --max-time 10 "${BASE_URL}/patients"
```

Notes:
- Cookie jar must be stored outside repo to avoid extra files appearing in git status --porcelain.
- Do not use -L; redirects must remain visible.
- If API responses are HTML, add: -H "X-Requested-With: XMLHttpRequest" and record that change in the doc.

## Expected Evidence Fields (Deferred)
- For 401/403: status line, Content-Type, small JSON body excerpt.
- For 302: status line and Location: header explicitly pointing to login (or equivalent).

## Next Steps / Unblock Conditions
- Start server (spark or XAMPP)
- Confirm BASE_URL sanity check
- Capture three curl outputs (401/403/302)
- Paste raw outputs and update status to PASS/FAIL (in a future round when runtime evidence exists)
